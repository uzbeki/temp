åˆã‚ã¦Talk Withã®on-premiseç‰ˆã‚’ãƒ‘ã‚½ã‚³ãƒ³ã§å‹•ãã‚ˆã†ã«ã™ã‚‹ã«ã¯å¿…è¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„ã¨ã„ã‘ãªã„ã§ã™ã€‚å¿…è¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æœ€åˆã®ä¸€å›ã ã‘è¡Œã„ã¾ã™ã€‚[PCã®åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ–°ã—ã„PCã«å…¥ã‚Œã‚‹å ´åˆã®ã¿ï¼‰](#PCã®åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ–°ã—ã„PCã«å…¥ã‚Œã‚‹å ´åˆã®ã¿ï¼‰)ã‚’ã”è¦§ãã ã•ã„ã€‚  
ğŸ‘†å¿…è¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ãŸã‚‰ã€Talk Withã®ã‚½ãƒ¼ã‚¹ã‚’PCã«å…¥ã‚Œã¦å‹•ã‹ã—ã¾ã™ã€‚[ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å°å…¥ï¼ˆtalk-withã‚·ã‚¹ãƒ†ãƒ ã®ã‚½ãƒ¼ã‚¹ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ–¹æ³•ï¼‰](#ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å°å…¥ï¼ˆtalk-withã‚·ã‚¹ãƒ†ãƒ ã®ã‚½ãƒ¼ã‚¹ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ–¹æ³•ï¼‰)ã‚’ã”è¦§ãã ã•ã„

# PCã®åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ–°ã—ã„PCã«å…¥ã‚Œã‚‹å ´åˆã®ã¿ï¼‰
- `NodeJS` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« => [NodeJSã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•](./how_to_install_node.md) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
- `Git` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« => [Gitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•](./how_to_install_git.md) ã«å¾“ã£ã¦ãã ã•ã„ã€‚  
- `PostgreSQL`ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« => [PostgreSQLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•](./how_to_install_pg.md) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
  - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ãŸã‚‰ã€`talk_with`ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚ä½œæˆæ–¹æ³•ã¯[ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ä½œã‚Šæ–¹](./how_to_install_pg.md/#ãƒ‡ãƒ¼ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ä½œã‚Šæ–¹)ã«å¾“ã£ã¦ãã ã•ã„ã€‚
- `OpenSSH` ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— => [OpenSSHã®æ–¹æ³•](./how_to_setup_openssh.md#OpenSSH) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
  - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒçµ‚ã‚ã‚Šã¾ã—ãŸã‚‰ã€æä¾›ã•ã‚ŒãŸSSHã‚­ãƒ¼ãƒšã‚¢ãƒ¼ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚ => [æ—¢ã«å­˜åœ¨ã™ã‚‹SSHã‚­ãƒ¼ãƒšã‚¢ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](./how_to_setup_openssh.md#æ—¢ã«å­˜åœ¨ã™ã‚‹sshã‚­ãƒ¼ãƒšã‚¢ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
- `FFMPEG` ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— => [ffmpegã®æ–¹æ³•](./how_to_install_ffmpeg.md) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
- ä¸Šã®å…¨éƒ¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çµ‚ã‚ã£ãŸã‚‰ã€PCå†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

> ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ãŒå‹•ã‹ãªã„å ´åˆã¯ã€é–‹ç™ºè€…ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å•ã„åˆã‚ã›ãã ã•ã„ã€‚

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å°å…¥ï¼ˆtalk-withã‚·ã‚¹ãƒ†ãƒ ã®ã‚½ãƒ¼ã‚¹ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ–¹æ³•ï¼‰
## STEP 1 - SPJã¨postgresqlã®æ¥ç¶šè¨­å®š
> âš  ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®sshã‚­ãƒ¼ã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚[æ—¢ã«å­˜åœ¨ã™ã‚‹SSHã‚­ãƒ¼ãƒšã‚¢ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](./how_to_setup_openssh.md#æ—¢ã«å­˜åœ¨ã™ã‚‹sshã‚­ãƒ¼ãƒšã‚¢ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—) ã«å¾“ã£ã¦ãã ã•ã„ã€‚
1. `init_talk_with.bat`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
2. `init_talk_with.bat`ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒä¸€æ™‚çš„ã«ä¸­æ­¢ã—ã€`notepad`ã‚¢ãƒ—ãƒªãŒé–‹ã‹ã‚Œã¾ã™ã€‚ãã“ã«ã€
   1. `PGSQL_PASSWORD` => PostgreSQLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸæ™‚ã«è¨­å®šã—ãŸ`ãƒã‚¹ã‚¿ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰`
   2. `SPJ_API_KEY` => SPJã®APIã‚­ãƒ¼
   3. `SPJ_API_URL` => SPJã®APIã®URL
   4. `SPJ_CATEGORY_ID` => SPJã®ã‚«ãƒ†ã‚´ãƒªãƒ¼IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå¿…è¦ãªã‹ã£ãŸã‚‰ãã®ã¾ã¾ï¼‰ã€‚
3. `notepad`ã§å…¥åŠ›çµ‚ã‚ã£ãŸã‚‰`Ctrl+S`ã§ä¿å­˜ã—ã€`notepad`ã‚’é–‰ã˜ã¦ãã ã•ã„ã€‚ï¼ˆãƒãƒƒãƒãŒæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«è¡Œãã¾ã™ã€‚è¡Œã‹ãªã„å ´åˆã¯`Enter`ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚ï¼‰
## STEP 2 - å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼
1. Step1ã®ï¼“ãŒé€²ã‚“ã ã‚‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãŒé–‹ã‹ã‚Œã¾ã™ã€‚ãã¡ã‚‰ã«ã€Œéˆ´æœ¨å…ˆç”Ÿã€ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ã‚‚ã£ã¦ãã¦ã€ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼é–‰ã˜ã¦ãã ã•ã„ã€‚ï¼ˆãƒãƒƒãƒãŒæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«è¡Œãã¾ã™ã€‚è¡Œã‹ãªã„å ´åˆã¯`Enter`ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚ï¼‰
## STEP 3 - Google Cloudã‚­ãƒ¼ã®è¨­å®š
1. STEP 2ãŒé€²ã‚“ã ã‚‰ã€`notepad`ã§Google Cloudã®Speech to Textç”¨ã®ã‚­ãƒ¼ã®ä¿å­˜ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ã‹ã‚Œã¾ã™ã€‚ãã¡ã‚‰ã«ã€Googleã®ã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã€`Ctrl+S`ã§ä¿å­˜ã—ã€`notepad`ã‚’é–‰ã˜ã¦ãã ã•ã„ã€‚ï¼ˆãƒãƒƒãƒãŒæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«è¡Œãã¾ã™ã€‚è¡Œã‹ãªã„å ´åˆã¯`Enter`ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚ï¼‰  
> ã‚¯ãƒ©ã‚¦ãƒ‰ã‚­ãƒ¼ã®ã‚µãƒ³ãƒ—ãƒ«ã«ã¤ã„ã¦ä»¥ä¸‹ã‚’ã”å‚ç…§ãã ã•ã„ï¼š![Cloud Key Sample](./images/googleSpeechToText/google_key.png)
2. `init_talk_with.bat`ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå†é–‹ã•ã‚Œã¾ã™ã€‚çµ‚äº†ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚
## Step 4 - Windows Firewallã®è¨±å¯
1. Windows Security Alertç”»é¢ãŒå‡ºã¾ã™ã€‚`Allow Access`ã¨ã„ã†ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚  
  ![Windows Security Alert](images/win_security_alert.png)
2. ãƒãƒƒãƒãŒçµ‚äº†ã™ã‚‹ã¾ã§ã€ã—ã°ã‚‰ããŠå¾…ã¡ã—ã¦ãã ã•ã„ã€‚çµ‚äº†ã—ãŸã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã§talk_withã‚¢ãƒ—ãƒªãŒé–‹ã‹ã‚Œã¾ã™ã€‚

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ æ–¹æ³•ï¼ˆä»Šå›ã¯å¿…è¦ãŒãªã„ï¼‰
- `pgAdmin`ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ (è©±ã™ç›¸æ‰‹ãƒ»èŠ¸èƒ½äºº)ã®æƒ…å ±ã‚’DBã«å…¥ã‚Œã¦ã€çµæœã®IDã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚ï¼ˆç®¡ç†ç”»é¢ãŒã§ãã‚‹ã¾ã§ï¼‰
  ```sql
  INSERT INTO characters(name, owner_id) VALUES('Suzuki Sensei', (SELECT id FROM users WHERE is_admin=true));
  ```
## å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«
- *ã‚³ãƒ”ãƒ¼ã—ãŸIDå*ã§`talk_with/app/public/videos/source`ã®ä¸­ã«ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’ä½œæˆã—ã€ãã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹•ç”»ã‚’ç½®ã

## ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å‹•ç”»è¨­å®šï¼ˆcsvï¼‰
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’`videoSettingFile.csv`ã«ã™ã‚‹
- ã‚³ãƒ”ãƒ¼ã—ãŸIDã‚’`videoSettingFile.csv`ã®`user_id`ã«è¨­å®š
- `videoSettingFile.csv`ã®ï¼’è¡Œç›®ã«ä»¥ä¸‹ã‚’ç„¡ã‘ã‚Œã°è¿½åŠ 
  ```txt
  original_id, character_id, title, action, loop_count, original_next_id, mic_on, play_now, mic_on_millisecond, question, comment
  ```
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ã‚¹ã®`docs/`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«`videoSettingFile.csv`ã‚’ä¿å­˜ã€‚ï¼ˆå¾Œã§ç®¡ç†ç”»é¢ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ï¼‰
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§`insertData.bat`ã‚’å®Ÿè¡Œã€‚





# videoSettingFile.csvã«ã¤ã„ã¦ï¼ˆä»Šå›ã¯å¿…è¦ãŒãªã„ï¼‰
## ãƒ‡ãƒ¼ã‚¿ãƒ¼ã®å½¢ï¼ˆå¿…é ˆï¼‰
1. ï¼’è¡Œç›®ã«ä»¥ä¸‹ã§ã‚ã‚‹ã“ã¨
  ```txt
  original_id, character_id, title, action, loop_count, original_next_id, mic_on, play_now, mic_on_millisecond, question, comment
  ```
2. ãƒ•ã‚¡ã‚¤ãƒ«åãŒ`videoSettingFile.csv`ã§ã‚ã‚‹ã“ã¨
3. æ‚£è€…IDï¼ˆcharacter_idï¼‰ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç™»éŒ²ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®IDã‚’è¨­å®šã™ã‚‹ã“ã¨

## è‡ªå‹•åˆæœŸè¨­å®šã®ãŸã‚ï¼ˆå¿…é ˆã§ã¯ãªã„ï¼‰
1. ã‚¹ã‚¿ãƒ¼ãƒˆå‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`start.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
2. ã†ãªãšãå‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`listen.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
3. ç„¡è¨€æ™‚ã«å†ç”Ÿã™ã‚‹å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`silence.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
4. é€£ç¶šç„¡è¨€æ™‚ã«å†ç”Ÿã™ã‚‹å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`out.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
5. SPJåˆ¤å®šã‚¹ã‚³ã‚¢ãŒä½ã„æ™‚ã«å†ç”Ÿã™ã‚‹å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`spjlow.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
6. èªè­˜ã§ããªã„éŸ³ã®å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯`unrecognized.mp4`ã§ã‚ã‚‹ã“ã¨ã€ã‹ã¤ã€character_idãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
7.  

# SPJã®è¨­å®šã«ã¤ã„ã¦
`talk_with/app`ã®ä¸­ã«`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚
`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨­å®šã™ã‚‹ï¼š
```bash
SPJ_API_KEY = SPJã®APIã‚­ãƒ¼
SPJ_CATEGORY_ID = ã‚«ãƒ†ã‚´ãƒªåˆ¥ã§æ¤œç´¢ã™ã‚‹å ´åˆã®ã‚«ãƒ†ã‚´ãƒªIDã€æ¤œç´¢ã—ãªã„å ´åˆã¯ç©ºç™½
SPJ_API_URL = SPJã®APIã®URL(æœ€å¾Œã®éƒ¨åˆ†ã¯/retrieve?ã§çµ‚ã‚ã‚‹ã“ã¨)
```

# æ©Ÿèƒ½ã®ä¸€è¦§  
* [ç®¡ç†ç”»é¢ã®èª¬æ˜](./admin_page.md)  

* [[ Î²-2 ] ç„¡è¨€ã®è¨­å®š](./how_to_setup_silence_limit.md)
* [[ Î²-10 ] conversation_countã®è¨­å®š](./how_to_setup_conversation_count.md)
* [[ Î²-29 ] pattern](./how_to_setup_pattern.md)
* [è‡ªå‹•èªè¨¼æ©Ÿèƒ½](./LogDB_with_Authentication.md)
* [replacement_list å‹•ç”»ID/å¤‰æ›ID](./how_to_setup_alternative_list.md)
* [fullscreen](./how_to_setup_fullscreen.md)
* [googleéŸ³å£°èªè­˜](./About_GoogleSpeechToText.md)
* [hide_cursor](./how_to_setup_hide_cursor.md)
* [hit_words](./how_to_setup_hit_words.md)
* [landscape_mode (ç¸¦æ¨ªè¨­å®šï¼‰](./how_to_setup_landscape_mode.md)
* [max_recognition_time](./how_to_setup_max_recognition_time.md)
* [show_speech_recognition_result](./how_to_setup_show_speech_recognition_result.md)
* [spj_category](./how_to_setup_spj_category.md)
* [tagï¼ˆå›ç­”ã‚¿ã‚°ï¼‰](./how_to_setup_tag.md)
* [ç®¡ç†è€…ç”»é¢ã®STOPãƒœã‚¿ãƒ³](./admin_stop_button.md)
* [ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚¹ã‚³ã‚¢åˆ¤å®šã«ã¤ã„ã¦](./About_chatbotScore.md)
* [ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ](./how_to_setup_random.md)
* [ã¾ã¨ã‚ãƒ¢ãƒ¼ãƒ‰](./how_to_setup_matome.md)
* [èãå¿˜ã‚Œãƒ¢ãƒ¼ãƒ‰](./how_to_setup_kikiwasure.md)
* [å¼·åˆ¶å†ç”Ÿ](./how_to_setup_force_video.md)
* [on-promiseãƒ¢ãƒ¼ãƒ‰](./how_to_switch_on-promise_mode.md)